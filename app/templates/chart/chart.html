{% extends "base.html" %}
{% load static %}

{% block page_title %}chart{% endblock %}

{% block content %}
<div class="chart-container">
    <div class="jumbotron">
        <h4 class="font-weight-light">リポジトリのスター数</h4>
        <div class="lastupdate">
            <i class="material-icons calendar">calendar_today</i>
            <p>Last Update:{{ last_fetched_date|date:"Y-m-d H:i" }}</p>
        </div>
        <div class="chartjs-container">
            <div class="barchart-container">
                <h5>Daily</h5>
                <canvas id="barChart"></canvas>
                <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
                <script>
                    var barLabels = ["{{ dict.0.name_owner }}","{{ dict.1.name_owner }}"];
                    var barDefaultData = ["{{ dict.0.star_count }}","{{ dict.1.star_count }}"];
                    var resource_path = ["{{ dict.0.resource_path }}","{{ dict.1.resource_path }}"];
                    var barNameOwner = "{{ dict.2.name_owner }}";
                    if (barNameOwner) {
                        barLabels.push("{{ dict.2.name_owner }}");
                        barDefaultData.push("{{ dict.2.star_count }}");
                        resource_path.push("{{ dict.2.resource_path }}");
                    }
                </script>
                <script src="{% static "chart/js/chartconfig.js" %}"></script>
            </div>
            <div class="linechart-container">
                <h5>monthly</h5>
                <canvas id="lineChart"></canvas>
            </div>
            <div class="git-btn-group" id="git-btn-group">
                <p>Go To Github</p>
                <div class="git-btn1">
                {% if dict.0.name_owner %}
                    <a href="https://github.com/{{ dict.0.name_owner }}">{{ dict.0.name_owner }}</a>
                {% endif %}
                </div>
                <div class="git-btn2">
                {% if dict.1.name_owner %}
                    <a href="https://github.com/{{ dict.1.name_owner }}">{{ dict.1.name_owner }}</a>
                {% endif %}
                </div>
                <div class="git-btn3">
                {% if dict.2.name_owner %}
                    <a href="https://github.com/{{ dict.2.name_owner }}" class="btn btn-info btn-sm">{{ dict.2.name_owner }}</a>
                {% endif %}
                </div>
            </div>
            <div class="chart-btn-group" id="button-group">
                <div class="chart-btn">
                <a href="{% url 'chart:chart_new' %}" class="btn btn-success btn-sm">別の条件で比較する</a>
                </div>
                <div class="chart-btn">
                <a href="{% url 'chart:chart_new' %}#access" class="btn btn-info btn-sm">ランキングを見る</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content%}
